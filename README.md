# Race weekends - Web App
A web app for organising how tyre sets (of three types) are used and returned across sessions in a race weekend.

## Assumptions
1. All registered users are Tyre Engineers.
2. Returns always take from the USED tyre sets first. 

## Code structure
The code is organised in an MVC structure.
- The Model class for "RaceWeekend" can be found in the "Models" folder, [RaceWeekend.cs](https://github.com/mbgp-raceeng/aqdas-khan/blob/main/RaceWeekendWebApp/Models/RaceWeekend.cs).
- The Views for the "RaceWeekend" controller can be found in the "Views" folder, [/RaceWeekends](https://github.com/mbgp-raceeng/aqdas-khan/tree/main/RaceWeekendWebApp/Views/RaceWeekends).
- The Controller for the "RaceWeekend" can be found in the "Controllers" folder, [RaceWeekendsController.cs](https://github.com/mbgp-raceeng/aqdas-khan/blob/main/RaceWeekendWebApp/Controllers/RaceWeekendsController.cs).

The Create/Edit/Details pages of Race Weekends are all controlled using the same JavaScript script, [raceWeekendEditor.js](https://github.com/mbgp-raceeng/aqdas-khan/blob/main/RaceWeekendWebApp/wwwroot/js/raceWeekendEditor.js). All three steps (tyre selection, session choices, returns) are performed in this script.
The styles for these pages are also done using the same CSS file, [raceWeekendEditorStyle.css](https://github.com/mbgp-raceeng/aqdas-khan/blob/main/RaceWeekendWebApp/wwwroot/css/raceWeekendEditorStyle.css).

The formatting and style of the website was auto-generated by the ASP.NET MVC template.

## Languages/Libraries/Tools used
- Written in C# using Visual Studio 2022
- ASP.NET MVC framework

## How to setup and use
- Click the green "Code" button and download the project using "Download ZIP". Alternatively, you can also click "Open with Visual Studio".
- Open Visual Studio, and run the file "RaceWeekendWebApp.sln" to load the project.
- Create the SQL table required for the project by opening the Package Manager Console and running the command "update-database".
- After that, the project can be run.

## Decisions/Tradeoffs that were made (due to time)
- The sessions and their order are saved as a single string. For example, three FREE SESSIONS and a QUALIFYING would be written as "1112". This was purely for time-saving measures in terms of keeping things working in one single table in the database.
- Using JSON to store data about sessions in a race weekend. This was purely done to get a feature working fast, but is not optimal.
- Saving and loading pre-set race weekend formats was done through saving/loading a .JSON locally. I was more focused on getting data to save/load in the first place.
- Use more of Bootstrap CSS to design the HTML elements, for consistency with the rest of the website.
- Clean up the code for "raceWeekendEditor.js". Although it is quite readable, sections can be re-written for the sake of maintainability and optimisation.

## Improvements/Changes that could have been made
- Make a separate table (in database) for sessions. Each session should have its own "RaceWeekendId" with number of tyre sets, returns, etc. This should then link to race weekends that contain the sessions.
- Make the model class for "RaceWeekend" check if the data is valid before saving in database.
- Save pre-set weekend formats online in its own table in the database, and have its own page (with its own view, model, and controller). Let individual user look at their pre-set formats to load.
- Add email verification as part of registration. This would essentially be several agile iterations in, but is worth mentioning.
- Write unit tests, testing both the C# and JS (back-end and front-end). This was alleviated for time, but was not as necessary for the back-end as this was automated by the template. The JavaScript was important though, as this contains the most logic.

---
## (lengthy) My thoughts and approach
This project had a working timespan of about 6 days, so I wanted to approach this with an Agile mindset, to allow for features to be added and tested overtime without the program being left unusable if programming took longer than usual. This was challenging in that sense, because a plan needed to be devised and performed all within this time, and I was more used to longer-form projects (e.g. 1-3 months). Eitherway, I felt that I could a write an MVP (minimum viable product) in the form of a single agile "sprint." 

I started off with planning how the program should be written. I read the repo description and re-wrote it into my own words, for rereading purposes. With that, I wrote a quick plan of how the program should be structured (in terms of classes). I decided on using an MVC architecture for this as it enables me to organise project files and data more neatly, and more easily allows me to send only what is necessary to end-users (views). This also increases the maintainability of the entire project, which is important for long-term work (e.g. further agile sprints).

C# with ASP.NET was chosen as it looks to have a higher degree of support for web development. I had previous experience using JSPs (Java Server Pages) in university and so I knew that a lot of my knowledge would go hand-in-hand with this, despite ASP.NET being a new framework to me. On top of that, its use of an ORM was preferable over manually DAO/DTOs in Java, for time and management reasons.

I started by learning how to use ASP.NET, making an example project to teach myself. After that, I created a new project using the MVC template bundled with ASP.NET. This was extremely helpful in automating a lot of functionality for me, such as default homepages account creation/logging, etc. I could easily add new controllers, models and views, and Visual Studio would automatically create connections required for these to function, thus saving me time. This is also great from a development standpoint, as you spend less time having to manually write connections yourself.

The pages regarding the race weekends were form pages, with a lot of custom HTML, CSS and JS written by me to handle user input and form submission. This took me nearly 2 days to write and test, and was done in isolation using a separate project. I ran into a problem half-way through where I realised that I had misinterpreted the description slightly, relating to tyre set returns, and so I had to make changes during the development of this feature, which extended development time longer than I had expected. In the end, the pages were able to be completed, despite the setback.

In the end, the plan I had was realised, but not exactly as intended. All of the features WERE fully implemented, however were done with a different approach: some data is saved as a JSON string WITHIN an SQL database. It would make a lot more sense to save data individually in columns or in new tables, but I found (during the planning stage even) that this would be a lot for me to work on in 1 week, so I avoided it to lend me more time to focus on other functionality. As this was an MVP after all, I wanted to implement this feature for the sake of getting it to work at least. That being said, if I did have more time, e.g. to perform a 2nd agile iteration, I would plan to save this data using separate tables.

---

## Original Repo Description

# Tyres App

Tyre engineers need a web page to plan and track tyre sets usage of a car for a race weekend. 

On a race weekend, the tyre manufacturer supplies one car with a predefined number of tyre sets. A tyre set can be of three types: Soft (red), Medium (yellow) or Hard (white). One tyre set represents 4 tyres of the same type to be fitted to the car. 

- **1. Number of sets:** the number of tyre sets may vary for each race weekend. The tyre engineer will input on the web page how many sets of each type are available for the Race weekend. For example, in a normal race weekend, there are 13 total sets: 2xHard, 3xMedium and 8xSoft. 

- **2. Weekend sessions:** Race weekends have sessions when cars can run their tyre sets. The tyre engineer will input on the web page the expected sessions for the race weekend. For example, in a normal race weekend, there is a Free Practice 1, Free Practice 2, Free practice 3, Qualifying and Race session. Race session will always be on this list, and it will always be the last session. 

- **3. Returns:** After each session, excluding the Race session, tyre sets may have to be returned to the tyre manufacturer and never be used again in the race weekend. The tyre engineer will input on the web platform how many tyre sets must be returned after each session. For example, in a normal race weekend, 2 tyre sets must be returned after each Free Practice session and 1 tyre set must be returned after Qualifying. Any remaining set may be used for the Race session. 

The Tyre Engineer will input number of sets (1), weekend sessions (2) and returns (3) prior to a race weekend. These settings define a weekend format. The tyre engineers will be grateful if they can save the settings of a weekend format so that they can reuse them for race weekends with the same format. 

The Tyre Engineer should be able to plan the weekend by moving sets around sessions and decide which sets to return. See how this affects other sessions and most importantly visualise which sets are left for the Race session. It should be possible to track sets and, if possible, to see their state: new (not used in any session) or used (fitted at least once in any session). 

Develop the web app that provides Tyre Engineers with the desired tool. 
